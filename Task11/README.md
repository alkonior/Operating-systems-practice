#Task 11

#1 
```
./vector-deadlock -n 2 -l 1 -v
```
Выводит
 ```
->add(0, 1)
<-add(0, 1)
              ->add(0, 1)
              <-add(0, 1)

 ```
или
```
              ->add(0, 1)
              <-add(0, 1)
->add(0, 1)
<-add(0, 1)
 ``` 
Но второй случай очень редкий.
```
./vector-deadlock -n 99 -l 100 -v -d
```
Иногда, но редко уходит в состояние блокировки.\
Блокировка очевидно не возникнет при 1 потоке.
 #2
 ```
./vector-global-order -n 2 -l 10 -v -d
 ```
1. Блокировка избегается за счет блоокировки по порядку. Самый последний поток не будет никогда никем заблокирован.
2. Особый случай нужен, чтобы не блокировать мьютекс дважды.
3. 
```
./vector-global-order -t -n 2 -l 100000 -d
Time: 0.05 seconds
```
```
./vector-global-order -t -n 2 -l 100000 -d -p
Time: 0.02 seconds
```
Флаг ```-p``` ускоряет програму, позволяя пар. сложение.
#3
Первая блокировка нужна, чтобы получить захват над первым вектором.

Сложно говорить о изменении числа потыток при изменении числа потоков, когда даже для одного числа потоков число попыток разнится от случая к случаю:
```
./vector-try-wait -n 2 -l 1000000  -d -t
Retries: 10 321 389
Time: 1.78 seconds
```
```
./vector-try-wait -n 2 -l 1000000  -d -t
Retries: 10 704 176
Time: 1.59 seconds
```
```
./vector-try-wait -n 2 -l 1000000  -d -t
Retries: 6 494 136
Time: 1.04 seconds
```
```
/vector-try-wait -n 2 -l 1000000  -d -t
Retries: 1 538 136
Time: 0.51 seconds
```
Разница в несколько раз. Причем если добавить еще один поток:
```
./vector-try-wait -n 3 -l 1000000  -d -t
Retries: 7 360 003
Time: 1.59 seconds
```
Особого отклонения нет.\
Однако, если использовать 7 потоков:
```
./vector-try-wait -n 7 -l 1000000  -d -t
Retries: 67058605
Time: 15.02 seconds
```
Время существенно увеличивается. Это говорит о том, что один поток работает, а остальные его ждут.
#4
```
./vector-avoid-hold-and-wait -n 7 -l 1000000  -d -t
Time: 8.59 seconds
```
Время значительно уменьшается.
```
./vector-avoid-hold-and-wait -n 7 -l 1000000  -d -t -p
Time: 1.28 seconds
```
Флаг -p тоже ускоряет программу.
#5
```
./vector-global-order -n 7 -l 1000000  -d -t 
Time: 6.30 seconds
```
```
./vector-global-order -n 7 -l 1000000  -d -t -p
Time: 0.18 seconds
```
```
./vector-nolock -n 7 -l 1000000  -d -t 
Time: 10.17 seconds
```
```
./vector-nolock -n 7 -l 1000000  -d -t -p
Time: 0.88 seconds
```
Формально, мы делаем сложение атомическим, но это не помогает со скоростью программы, независимо от флага -p.